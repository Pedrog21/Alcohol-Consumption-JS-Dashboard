<!DOCTYPE html>
<meta charset='utf-8'>
<html>
  <head>
    <script src="https://d3js.org/d3.v3.js"></script>
    <script src="https://d3js.org/topojson.v1.js"></script>
    <script src="https://rawgithub.com/markmarkoh/datamaps/master/dist/datamaps.none.min.js"></script>
    <script src='prt.js'></script>

    <link rel='stylesheet' href='style.css'>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/ >
    <title>Alcohol Consumption in High School Students</title>
    <header>
   <h1>Alcohol Consumption in High School Students</h1>
 </header>

    <style>
      body {
        width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                background-color: dimgrey;
        font-family: 'Open Sans', sans-serif;
        font-size: 11px;
        font-weight: 300;
        fill: #242424;
        text-align: center;
        /*text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff, 0 -1px 0 #fff;*/
        cursor: default;
      }
      .legend {
        font-family: 'Raleway', sans-serif;
        fill: #333333;
      }
      .tooltip {
        fill: #333333;
      }
    </style>

    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <link rel="stylesheet"  href="legends.css">
    <style type="text/css"></style>

  </head>

  <body>


    <!--<script type='text/javascript' src='script.js'></script>-->

    <div id="container" style="position: absolute;  top: 150px;
    right: 950px;
    width: 300px;
    height: 520px;
    /*border: 3px solid #73AD21;"></div>

    <script type='text/javascript' src='chernoff.js'></script>
   <script>
        var map = new Datamap({
          element: document.getElementById('container'),
          geographyConfig: {
            dataJson: d3.json('prt.json')
          },
          done: function(datamap) {
            datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
                console.log(geography.properties.name)
                if(geography.properties.name == 'Norte'){
                  clickypieNorte();
                }
                else if(geography.properties.name == 'Centro'){
                  clickypieCentro();
                }
                else if(geography.properties.name == 'Alentejo'){
                  clickypieAlentejo();
                }
                else if(geography.properties.name == 'Algarve'){
                  clickypieAlgarve();
                }
                else if(geography.properties.name == 'Lisboa'){
                  clickypieLisboa();
                }
                else {
                  console.log("nenhuma regiao selecionada")
                }
              //clickypie();
            });
          },
          scope: 'prt',
         setProjection: function(element, options) {
                          var projection, path;
                          projection = d3.geo.mercator()
                              .center([-8.80, 38.45])
                              .scale(3000)
                              .translate([element.offsetWidth / 2, element.offsetHeight / 2]);
                            path = d3.geo.path().projection( projection );
                            return {path: path, projection: projection};
                          }
          });
    </script>


<div class="legend1"  style="position: absolute;  top: 200px;
  right: 1150px;
  width: 300px;
  height: 200px;
  /*border: 3px solid #FF0000;" >
 <h4>Alcoholic Consumption Levels</h4>
   <div class="legend1"> <p class="country-name"><span class="key-dot queens"></span>Drinks more than 3 times a week</p> </div>
   <div class="legend1"> <p class="country-name"><span class="key-dot kings"></span>Drinks 1-2 times a week</p> </div>
   <div class="legend1"> <p class="country-name"><span class="key-dot bronx"></span>Drinks 2-4 times a month</p> </div>
   <div class="legend1"> <p class="country-name"><span class="key-dot coise"></span>Drinks Monthly</p> </div>
   <div class="legend1"> <p class="country-name"><span class="key-dot coise2"></span>Almost Never Drinks</p> </div>
</div>

<!--RADAR CHART-->

  <div class="radarChart"  style="position: absolute;  top: 50px;
    right: 50px;
    width: 400px;
    height: 400px;
    /*border: 3px solid #00ADFF;"></div>

  <script src="radarChart.js"></script>
  <script>
    /* Radar chart design created by Nadieh Bremer - VisualCinnamon.com */
    //////////////////////////////////////////////////////////////
    //////////////////////// Set-Up //////////////////////////////
    //////////////////////////////////////////////////////////////
    var margin = {top: 100, right: 100, bottom: 100, left: 100},
      width = Math.min(400, window.innerWidth - 10) - margin.left - margin.right,
      height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);
    //////////////////////////////////////////////////////////////
    ////////////////////////// Data //////////////////////////////
    //////////////////////////////////////////////////////////////
    var data = [
          [//iPhone
          {axis:"Alcohol",value:0.22},
          {axis:"Mother's Habilitations",value:0.28},
          {axis:"Father's Habilitations",value:0.29},
          {axis:"Failures",value:0.17},
          {axis:"Tobacco",value:0.22},
          {axis:"Age",value:0.02}
          ]
        ];
    //////////////////////////////////////////////////////////////
    //////////////////// Draw the Chart //////////////////////////
    //////////////////////////////////////////////////////////////
    var color = d3.scale.ordinal()
      .range(["#00008B"]);
    var radarChartOptions = {
      w: width,
      h: height,
      margin: margin,
      maxValue: 0.5,
      levels: 5,
      roundStrokes: true,
      color: color
    };
    //Call function to draw the Radar chart
    RadarChart(".radarChart", data, radarChartOptions);
  </script>
</body>






<!--GROUPED BAR CHART-->
<style>

.axis .domain {
  display: none;
}

</style>
<!--<svg width="960" height="500"></svg>-->
<div id="barchart"
  style="position: absolute;
  top: 400px;
  right: 500px;
  width: 500px;
  height: 200px;" ></div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js'></script>
<script>




var svg = d3.select("#barchart")
    .append("svg")
      .attr("width", 900)
      .attr("height", 460)
    .append("g")
      .attr("transform", "translate(50,30)");
  /*  margin = {top: 20, right: 20, bottom: 20, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +barchart.attr("height") - margin.top - margin.bottom,
    g = barchart.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");*/


var x0 = d3.scaleBand()
    .rangeRound([0, 750])
    .paddingInner(0.1);

var x1 = d3.scaleBand()
    .padding(0.05);

var y = d3.scaleLinear()
    .rangeRound([height, 0]);

var z = d3.scaleOrdinal()
    //.range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);
    .range(["#7CFC00", "#00FFFF", "#1E90FF", "#0000CD"]);



d3.csv("ModeBarChart.csv", function(d, i, columns) {
  for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = +d[columns[i]];
  return d;
}, function(error, data) {
  if (error) throw error;

  var keys = data.columns.slice(1);

  x0.domain(data.map(function(d) { return d.Alcohol; }));
  x1.domain(keys).rangeRound([0, x0.bandwidth()]);
  y.domain([0, d3.max(data, function(d) { return d3.max(keys, function(key) { return d[key]; }); })]).nice();

//Tooltip
  const tip = d3.tip().html(d=> d.value);
  svg.call(tip)


  svg.append("g")
    .selectAll("g")
    .data(data)
    .enter().append("g")
      .attr("transform", function(d) { return "translate(" + x0(d.Alcohol) + ",0)"; })
    .selectAll("rect")
    .data(function(d) { return keys.map(function(key) { return {key: key, value: d[key]}; }); })
    .enter().append("rect")
      .attr("x", function(d) { return x1(d.key); })
      .attr("y", function(d) { return y(d.value); })
      .attr("width", x1.bandwidth())
      .attr("height", function(d) { return height - y(d.value); })
      .attr("fill", function(d) { return z(d.key); })
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide);




  svg.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x0));

  svg.append("g")
      .attr("class", "axis")
      .call(d3.axisLeft(y).ticks(null, "s"))
    .append("text")
      .attr("x", 2)
      .attr("y", y(y.ticks().pop()) + 0.5)
      .attr("dy", "0.32em")
      .attr("fill", "#000")
      .attr("font-weight", "bold")
      .attr("text-anchor", "start")
      .text("Labels");

  var legend = svg.append("g")
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
    .selectAll("g")
    .data(keys.slice().reverse())
    .enter().append("g")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", 850 - 19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", z);

  legend.append("text")
      .attr("x", 850 - 24)
      .attr("y", 9.5)
      .attr("dy", "0.32em")
      .text(function(d) { return d; });



});



</script>


</html>
